---
layout: post
title:  "실행 계획"
date:   2024-01-30 17:40:00 +0900
categories:  SQL
published: false
---

### 실행 계획(explain)이란?

- 클라이언트가 DBMS에 요청한 SQL문을 어떻게 데이터를 불러올 것인지에 관한 계획 및 경로
- SQL 튜닝을 하기 위한 정보를 파악할 수 있다.
- 실제 실행 결과가 아닌 예측 결과를 반환한다.
- 실제 실행 결과를 보려면 옵션을 추가해야 한다.

### 사용 방법

{% highlight sql %}
EXPLAIN 실행할_SQL문;

EXPLAIN 실행할_SQL문\g; /* 세로로 출력된다. */

/* 8.0 버전부터 포맷을 지정할 수 있다. */
EXPLAIN FORMAT = TABLE 실행할_SQL문; /* 디폴트가 TABLE이라서 FORMAT = TABLE은 생략해도 된다. */
EXPLAIN FORMAT = TREE 실행할_SQL문; /* 트리 구조 */
EXPLAIN FORMAT = JSON 실행할_SQL문; /* JSON 구조 */
{% endhighlight %}

### 실행 계획 분석하기

| 실행 계획 | 의미 |
|-------|--------|
| id | SELECT 쿼리 별 부여되는 식별자 값 |
| select_type | 각 단위 SELECT 쿼리가 어떤 타입의 쿼리인지 표시되는 칼럼 |
| table | 접근하고 있는 테이블에 대한 표시 |
| partitions | 테이블에 파티셔닝이 되어 있는 경우 사용되는 필드 |
| type | 각 테이블의 레코드를 어떻게 읽었는지에 대한 접근 방식 |
| possible_keys | “사용될 법했던 인덱스의 목록”이며 반드시 사용된 것은 아님 |
| key | 최종 선택된 실행 계획에서 사용되는 인덱스 |
| key_len | 선택된 인덱스의 길이를 의미 |
| ref | 접근 방법이 ref면 참조 조건(equal 비교 조건)으로 어떤 값이 제공됐는지 표시 |
| rows | 실행 계획의 효율성 판단을 위해 예측했던 레코드 건수를 보여준다. (정확하지는 않음) |
| filtered | 필터링되고 남은 레코드의 비율 (정확하지는 않음) |
| Extra | 옵티마이저가 어떻게 동작하는지에 대해 알려주는 힌트 값 |

#### id
#### select_type
#### table
#### partitions
#### type
#### possible_keys
#### key
#### key_len
#### ref
#### rows
#### filtered
#### Extra

- [MySQL 실행 계획과 결과 컬럼 설명 (MySQL EXPLAIN Output Format)](https://kukim.tistory.com/128)
- [MySQL 실행 계획(좋은 쿼리는 못 만들어도 뭐같은 쿼리는 만들지 말아야지)](https://jeong-pro.tistory.com/243)
- [MySQL EXPLAIN 실행계획 마스터하기(feat. RealMySQL 8.0)](https://zzang9ha.tistory.com/436)