---
layout: post
title:  "FULLTEXT INDEXING"
date:   2024-01-30 00:59:00 +0900
categories:  SQL
published: false
---

### FULLTEXT INDEX

- LIKE 연산자로도 검색이 가능하긴 하지만 데이터의 길이가 길어지면 성능이 떨어지기에  
그런 경우 FULLTEXT INDEX를 사용한다.

### 사용 방법

- FULLTEXT INDEX는 다른 인덱스들과 다르게 전용 문법이 존재한다.
- 어절 단위로 인식된다.
    - 만약에 AGAINST에 '공부'라고 지정했을 때 '데이터베이스 공부'는 검색되지만 '공부를 하자'는 검색되지 않는다.

#### 기본 검색

- `MATCH(칼럼명) AGAINST(expr)`

#### 자연 검색

- `MATCH(칼럼명) AGAINST('expr1 expr2')`
- OR 검색을 한다.
- 만약에 중간에 공백 문자가 포함된 검색을 하고 싶다면 큰따옴표로 묶는다.
    - `MATCH(칼럼명) AGAINST('"expr1 expr2"')`

#### BOOLEAN MODE

{% highlight sql %}
{% endhighlight %}

### 검색이 안 되는 경우에 확인할 사항

- 표현식 확인하기
- 최소 검색 가능한 자리 수
    - `SHOW VARIABLES LIKE '%ft_min%';`를 실행하여 설정된 값을 확인한다.
    - 만약 요구사항과 다르다면 운영체제에 맞는 파일에 가서 수정한다.
    - MySQL이 설치된 폴더에 가서 my.ini나 my.cnf에 있는 변수 중에서  
    ft_min_word_len 또는 innodb_ft_min_token_size의 값을 수정한다.
    - 값을 수정했다면 MySQL을 종료 후 재실행한다.
    - 인덱스가 이미 적용되있다면 `REPAIR TABLE 테이블명 QUICK;` 또는 `OPTIMIZE TABLE 테이블명;`를 실행한다.

- [MySQL Full-Text 검색 / match against](https://dogcowking.tistory.com/78)
- [[MySQL] FullText 검색, 여러개 Like](https://bogyum-uncle.tistory.com/182)