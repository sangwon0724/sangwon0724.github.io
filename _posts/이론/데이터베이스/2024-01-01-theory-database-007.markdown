---
layout: post
title:  "관계 데이터 연산"
date:   2024-01-01 23:00:00 +0900
categories: 이론&nbsp;-&nbsp;데이터베이스
---

## 관계 데이터 연산 (relationship data operation)

- 관계 데이터 모델의 연산
- 원하는 데이터를 얻기 위해 릴레이션엥 필요한 처리 요구를 수행하는 것
- 종류
    - 관계 대수 (relational algebra)
        - 원하는 결과를 얻기 위해 데이터의 처리 과정을 순서대로 기술하는 절차 언어
    - 관계 해석 (relational calculus)
        - 원하는 결과를 얻기 위해 처리를 원하는 데이터가 무엇인지만 기술하는 비절차 언어
- 사용자의 입장에서는 처리 과정을 자세히 기술하는 것보다  
처리를 원하는 데이터가 무엇인지만 기술하는 비절차 언어가 더 편리하게 느껴질 수 있다.
- 데이터를 처리하는 기능과 처리를 요구하는 표현력에서는 관계 대수와 관계 해석은 능력이 동등하다.
- 관계 대수와 관계 해석으로 기술된 데이터 처리 요구는 반대되는 연산으로 기술할 수 있다.
- 새로운 데이터 언어가 제안되면 해당 데이터 언어의 유용성을 검증해야 하는데,  
    그런 검증의 기준 역할을 하는 것이 관계 대수와 관계 해석이다.
    - <b>관계적으로 완전하다. (relationally complete)</b>
        - 관계 대수나 관계 해석으로 기술할 수 있는  
        모든 질의를 새로 제안된 데이터 언어로 기술할 수 있는 상태
- 질의 (query)
    - 데이터에 대한 처리 요구

## 관계 대수

- 원하는 결과를 얻기 위해 릴레이션을 처리하는 과정을 순서대로 기술하는 언어
- 연산자들의 집합으로도 정의할 수 있다.
- 관계 대수는 릴레이션을 연산한다.
- 폐쇠 특성 (closure property)
    - 릴레이션에 연산자를 적용해 얻은 결과도 릴레이션이라는 관계 대수의 특성
- 종류
    - 일반 집합 연산자 (set operation)
        - 합집합 (∪)
        - 교집합 (∩)
        - 차집합 (-)
        - 카티션 프로덕트 (x)
    - 순수 관계 연산자 (relational operation)
        - 셀렉트 (σ)
        - 프로젝트 (Π)
        - 조인 (⋈)
        - 디비전 (÷)

### 일반 집합 연산자

- 수학의 집합 관련 연산자를 차용한 연산자
- 릴레이션이 투플의 집합이라는 개념을 이용한다.
- 연산을 위해서는 피연산자인 릴레이션이 두 개 필요하다.
- 합집합/교집합/차집합 연산자는 피연산자인 두 개의 릴레이션끼리 합병 가능해야 한다.
- 릴레이션의 합병 가능 조건
    - 두 릴레이션의 차수(속성의 개수)가 같다.
    - 두 릴레이션에서 대응되는 속성의 도메인이 같다.
        - 도메인이 같으면 속성명은 달라도 된다.

| 연산자 | 기호 | 표현 | 의미 |
|-------|--------|---------|---------|
| 합집합 | ∪ | R ∪ S | 릴레이션 R과 S의 합집합을 반환 |
| 교집합 | ∩ | R ∩ S | 릴레이션 R과 S의 교집합을 반환 |
| 차집합 | - | R - S | 릴레이션 R과 S의 차집합을 반환 |
| 카티션 프로덕트 | x | R x S | 릴레이션  R의 각 투플과 릴레이션 S의 각 투플을<br/>모두 연결하여 만들어진 새로운 투플을 반환 |

#### 합집합 (union)

- 합병이 가능한 두 릴레이션 R과 S의 합집합은 R ∪ S로 표현헌더,
- R ∪ S는 릴레이션 R에 속하거나 또는 릴레이션 S에 속하는 모든 투플로 결과 릴레이션을 구성한다.
- 중복된 투플은 중복되지 않고 한 번만 나타난다.
    - 합집합의 결과도 릴레이션이기 때문에 중복 투플이 존재할 수 없다는  
    릴레이션의 기본 특징을 유지해야 하기 때문이다.
- 교환적 특징
    - R ∪ S와 S ∪ R의 결과는 동일하다.
- 결합적 특징
    - (R ∪ S) ∪ T와 R ∪ (S ∪ T)의 결과는 동일하다.

R

| 번호 | 이름 |
|-------|--------|
| 100 | 정소화 |
| 200 | 김선우 |
| 300 | 고명석 |

S

| 번호 | 이름 |
|-------|--------|
| 100 | 정소화 |
| 101 | 채광주 |
| 102 | 김수진 |

R ∪ S

| 번호 | 이름 |
|-------|--------|
| 100 | 정소화 |
| 200 | 김선우 |
| 300 | 고명석 |
| 101 | 채광주 |
| 102 | 김수진 |

#### 교집합 (intersection)

- 합병이 가능한 두 릴레이션 R과 S의 교집합은 R ∩ Sfh vygusgksek.
- R ∩ S는 릴레이션 R과 S에 속하는 모든 투플ㄹ로 결과 릴레이션을 구성한다.
- 교환적 특징
    - R ∩ S와 S ∩ R의 결과는 동일하다.
- 결합적 특징
    - (R ∩ S) ∩ T와 R ∩ (S ∩ T)의 결과는 동일하다.
R

| 번호 | 이름 |
|-------|--------|
| 100 | 정소화 |
| 200 | 김선우 |
| 300 | 고명석 |

S

| 번호 | 이름 |
|-------|--------|
| 100 | 정소화 |
| 101 | 채광주 |
| 102 | 김수진 |

R ∩ S

| 번호 | 이름 |
|-------|--------|
| 100 | 정소화 |

#### 차집합 (difference)

- 합병이 가능한 두 릴레이션 R과 S의 차집합은 R - S로 표현한다.
- R - S는 릴레이션 R에는 존재하지만 릴레이션 S에는 존재하지 않는 투플들로 결과 릴레이션을 구성한다.
- 차집합은 피연산자의 순서에 따라서 결과 릴레이션이 달라진다.

R

| 번호 | 이름 |
|-------|--------|
| 100 | 정소화 |
| 200 | 김선우 |
| 300 | 고명석 |

S

| 번호 | 이름 |
|-------|--------|
| 100 | 정소화 |
| 101 | 채광주 |
| 102 | 김수진 |

R - S

| 번호 | 이름 |
|-------|--------|
| 200 | 김선우 |
| 300 | 고명석 |

S - R

| 번호 | 이름 |
|-------|--------|
| 101 | 채광주 |
| 102 | 김수진 |

#### 카티션 프로덕트 (cartesian product)

- 두 릴레이션 R과 S의 카티션 프로덕트는 R x S로 표현한다.
- R x S는 릴레이션 R에 속한 각 투플과 릴레이션 S에 속한 각 투플을 모두 연결하여 만들어진  
새로운 투플로 결과 릴레이션을 구성한다.
- 교환적 특징
    - R x S와 S x R의 결과는 동일하다.
- 결합적 특징
    - (R x S) x T와 R x (S x T)의 결과는 동일하다.

R

| 번호 | 이름 |
|-------|--------|
| 100 | 정소화 |
| 200 | 김선우 |
| 300 | 고명석 |

S

| 번호 | 나이 |
|-------|--------|
| 100 | 40 |
| 101 | 30 |
| 102 | 25 |

R x S

| R.번호 | R.이름 | S.번호 | S.나이 |
|-------|--------|--------|--------|
| 100 | 정소화 | 100 | 40 |
| 100 | 정소화 | 101 | 30 |
| 100 | 정소화 | 102 | 25 |
| 200 | 김선우 | 100 | 40 |
| 200 | 김선우 | 101 | 30 |
| 200 | 김선우 | 102 | 25 |
| 300 | 고명석 | 100 | 40 |
| 300 | 고명석 | 101 | 30 |
| 300 | 고명석 | 102 | 25 |

### 순수 관계 연산자

- 릴레이션의 구조와 특성을 이용하는 연산자

| 연산자 | 기호 | 표현 | 의미 |
|-------|--------|---------|---------|
| 셀렉트 | σ | σ조건(R) | 릴레이션 R에서 조건을 만족하는 투플들을 반환 |
| 프로젝트 | Π | Π속성리스트(R) | 릴레이션 R에서 주어진 속성들의 값으로만 구성된 투플들을 반환 |
| 조인 | ⋈ | R ⋈ S | 공통 속성을 이용해 릴레이션 R과 S의 투플들을 연결하여 만들어진<br/>새로운 투플들을 반환 |
| 디비전 | ÷ | R ÷ S | 릴레이션 S의 모든 투플과 관련이 있는 릴레이션 R의 투플들을 반환 |

자연 조인 : 조인 속성 값이 같은 투플끼리만 연결하여 생성된 새로운 투플로 구성된다.
세타 조인 : 주어진 조인 조건을 만족하는 두 릴레이션의 모든 투플을 연결한 새로운 투플로 결과 릴레이션을 구성한다.
세미 조인 : 검색에 불필요한 속성을 미리 제거하여 조인한다. (비용이 줄어든다)

외부 조인 : 투플이 상대 릴레이션에 존재하지 않아 조인 연산에서 제외된 모든 투플을 결과 릴레이션에 포함시킨다.(없는 부분은 NULL로 처리해서)


기호 :  / 표현 : 