---
layout: post
title:  "Call Server To Server"
date:   2023-12-15 16:03:00 +0900
categories: Group&nbsp;:&nbsp;Spring Spring&nbsp;Boot
---

### 서버 호출 방식 (공통)

1. 서버를 호출할 서비스 Class를 만든다.
2. 원하는 기능을 호출할 메소드를 만든다.
3. 해당 메소드의 반환형은 서버를 호출해서 전달받을 결과물의 형태와 같게 지정한다.
4. UriComponentsBuilder Class를 통해서 호출할 서버의 URI를 생성한다.
5. RestTemplate의 메소드를 호출 방식에 따라 설정하여 서버와 통신하여 결과물 받기
6. 해당 결과물을 반환하기

### URI 생성

{% highlight java %}
URI uri = UriComponentsBuilder
.fromUriString("호출할 서버 주소") //예시 : http://localhost:8093
.queryParam(name, values) //정의 : uri에서 쓰는 query 값을 설정하는 메소드, 예시 : queryParam("name", "HongGilDong")
.path("호출할 path") //예시 : /api/server/hello
.encode() //정의 : uri의 기본 문자 set을 UTF-8로 변경
.build() //정의 : UriComponents로 변환
.toUri(); //정의 : uri로 변환

//.expand(값) : path의 값에서 중간에 {name}처럼 Path Value를 쓸 수 있는데 그 값을 차례대로 채워준다.
//({}가 두 번이면 expand()도 두 번)
{% endhighlight %}

>※ RestTemplate의 메소드로 파라미터로 사용될 값에 URI 대신에 String으로 주소를 직접 써도 된다.

### RestTemplate를 통한 서버 호출 - GET 방식


{% highlight java %}
{% endhighlight %}